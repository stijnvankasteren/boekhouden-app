generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model CompanySettings {
  id                     String   @id @default(uuid())
  companyName            String
  contactPerson          String?
  address                String?
  postalCode             String?
  city                   String?
  phone                  String?
  email                  String?
  website                String?
  kvkNumber              String?
  vatId                  String?
  iban                   String?
  defaultPaymentTermDays Int      @default(30)
  fiscalYear             Int
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt
}

model Relation {
  id           String        @id @default(uuid())
  number       Int           @unique
  name         String
  address      String?
  postalCode   String?
  city         String?
  phone        String?
  email        String?
  vatNumber    String?
  notes        String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  transactions Transaction[]
}

model Transaction {
  id             String    @id @default(uuid())
  date           DateTime
  description    String
  relationId     String?
  relation       Relation? @relation(fields: [relationId], references: [id], onDelete: SetNull)
  type           String
  amountExclVat  Float
  vatRate        String
  vatAmount      Float
  amountInclVat  Float
  category       String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt

  @@index([date])
  @@index([type])
  @@index([relationId])
}
