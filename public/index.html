<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <title>Boekhouding Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="brand-title">SVK Beheer Holding B.V.</div>
      <div class="brand-subtitle">Doorlopende boekhouding &mdash; Simpele webversie</div>
    </div>
    <div class="brand-meta">
      <span class="tag">Layout gebaseerd op Excel</span>
    </div>
  </header>

  <nav class="top-nav">
    <button type="button" class="nav-link active" data-view="dashboard">Dashboard</button>
    <button type="button" class="nav-link" data-view="factuur">Factuur</button>
    <button type="button" class="nav-link" data-view="income">Verkopen &amp; Inkomsten</button>
    <button type="button" class="nav-link" data-view="expense">Inkopen &amp; Uitgaven</button>
    <button type="button" class="nav-link" data-view="categories">Categorieën</button>
    <button type="button" class="nav-link" data-view="accounts">Rekeningen</button>
    <button type="button" class="nav-link" data-view="beginbalans">Beginbalans</button>
    <button type="button" class="nav-link" data-view="relations">Relaties</button>
    <button type="button" class="nav-link" data-view="wvbalans">W&amp;V en Balans</button>
    <button type="button" class="nav-link" data-view="btw">Btw-aangifte</button>
    <button type="button" class="nav-link" data-view="settings">Instellingen</button>
    <button type="button" class="nav-link" data-view="disclaimer">Disclaimer</button>
  </nav>

  <main class="page">
    <!--
      De samenvattingsregel toont de totalen voor inkomsten, uitgaven en resultaat.
      Daaronder staat een filter waarmee je het jaar kunt kiezen waarvoor de
      berekening wordt getoond. Deze keuzelijst wordt gevuld via JavaScript op
      basis van de aanwezige transacties. Standaard wordt 'Alle jaren'
      geselecteerd zodat je een doorlopend overzicht krijgt.
    -->
    <section class="summary-row">
      <div class="summary-card income">
        <div class="summary-label">Inkomsten</div>
        <div id="totalIncome" class="summary-amount">€ 0,00</div>
      </div>
      <div class="summary-card expense">
        <div class="summary-label">Uitgaven</div>
        <div id="totalExpenses" class="summary-amount">€ 0,00</div>
      </div>
      <div class="summary-card result">
        <div class="summary-label">Resultaat</div>
        <div id="result" class="summary-amount">€ 0,00</div>
      </div>
    </section>
    <div class="year-filter">
      <label for="yearFilter">Periode:</label>
      <select id="yearFilter"></select>
    </div>

    <section class="content-grid">
      <section class="panel" data-panel-id="form">
        <div class="panel-header">
          <h2>Nieuwe transactie</h2>
          <span class="panel-caption">Vul hieronder inkomsten en uitgaven in</span>
        </div>
        <form id="txForm" class="tx-form">
          <div class="field">
            <label for="date">Datum</label>
            <input type="date" id="date" required />
          </div>

          <div class="field">
            <label for="description">Omschrijving</label>
            <input type="text" id="description" placeholder="Bijv. factuur klant" required />
          </div>

          <div class="field">
            <label for="amount">Bedrag excl. btw</label>
            <input type="number" id="amount" step="0.01" required />
          </div>

          <div class="field">
            <label for="vatRate">Btw-tarief</label>
            <select id="vatRate">
              <option value="21">21%</option>
              <option value="9">9%</option>
              <option value="0">0%</option>
            </select>
          </div>

          <div class="field">
            <label for="type">Type</label>
            <select id="type">
              <option value="income">Inkomst</option>
              <option value="expense">Uitgave</option>
            </select>
          </div>

          <!-- Categorie selecteert een categorie die hoort bij de gekozen transactie.
               De lijst van categorieën wordt dynamisch geladen vanuit de
               instellingen (categorieënpagina).  De inhoud van deze select
               wordt via JavaScript gevuld en aangepast aan het gekozen
               transactietype. -->
          <div class="field">
            <label for="category">Categorie</label>
            <select id="category">
              <!-- Opties worden via JavaScript toegevoegd -->
            </select>
          </div>

          <div class="form-actions">
            <button type="submit">Opslaan</button>
          </div>
        </form>
        <p id="formMessage" class="message"></p>
      </section>

      <section class="panel" data-panel-id="table">
        <div class="panel-header">
        <h2>Transacties</h2>
          <span class="panel-caption">Overzicht van alle mutaties.</span>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Datum</th>
                <th>Omschrijving</th>
                <th>Type</th>
                <th>Categorie</th>
                <th class="amount-col">Bedrag</th>
                <th class="action-col"></th>
              </tr>
            </thead>
            <tbody id="txTableBody">
              <!-- Rijen via JavaScript -->
            </tbody>
          </table>
        </div>
        <div id="sheetContent" class="sheet-content"></div>
        <div id="sheetToolbar" class="sheet-toolbar">
          <button type="button" id="saveSheetBtn">Wijzigingen opslaan</button>
          <span id="sheetMessage" class="sheet-message"></span>
        </div>
      </section>
    </section>
  </main>

  <footer class="app-footer">
    <div>Data wordt opgeslagen als JSON-bestand in deze container (<code>/app/data/transactions.json</code>).</div>
    <div class="footer-right">1 container &mdash; geen externe database nodig.</div>
  </footer>

  <div id="sheet-templates" style="display:none;">
  <template id="tpl-dashboard">
    <h3 class="sheet-title">Snelle acties</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Gebruik de knoppen hieronder om snel naar de belangrijkste onderdelen van je administratie te gaan.
      </p>
      <div class="sheet-actions">
        <button type="button" class="nav-chip" data-goto-view="income">+ Nieuwe inkomst</button>
        <button type="button" class="nav-chip" data-goto-view="expense">+ Nieuwe uitgave</button>
        <button type="button" class="nav-chip" data-goto-view="wvbalans">Winst &amp; verlies</button>
        <button type="button" class="nav-chip" data-goto-view="btw">Btw-overzicht</button>
        <button type="button" class="nav-chip" data-goto-view="categories">Categorieën beheren</button>
        <button type="button" class="nav-chip" data-goto-view="accounts">Rekeningen beheren</button>
        <button type="button" class="nav-chip" data-goto-view="relations">Relaties beheren</button>
      </div>
    </div>
  </template>

  <template id="tpl-factuur">
    <h3 class="sheet-title">Factuur</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        In deze simpele versie kun je nog geen echte facturen genereren.
        Wel kun je de transacties op het tabblad <strong>Verkopen &amp; Inkomsten</strong> vastleggen.
      </p>
      <div class="field">
        <label for="invoice-prefix">Factuurnummer prefix</label>
        <input id="invoice-prefix" type="text" placeholder="Bijv. 2025-" />
      </div>
      <div class="field">
        <label for="invoice-next">Volgend factuurnummer</label>
        <input id="invoice-next" type="number" min="1" step="1" />
      </div>
      <p class="sheet-note">
        Deze instellingen worden samen met de rest van de pagina opgeslagen als je op
        <strong>Wijzigingen opslaan</strong> klikt.
      </p>
    </div>
  </template>

  <template id="tpl-income">
    <h3 class="sheet-title">Verkopen &amp; Inkomsten</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Gebruik het linker formulier om nieuwe inkomsten toe te voegen. Hieronder kun je eventueel
        een eigen overzicht of notities bijhouden.
      </p>
      <table class="sheet-table" id="income-notes">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Klant / omschrijving</th>
            <th>Bedrag</th>
            <th>Opmerkingen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td></td>
            <td>Voorbeeld: abonnement klant X</td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="sheet-actions">
        <button type="button" data-action="add-row" data-target="income-notes">+ Rij toevoegen</button>
      </div>
    </div>
  </template>

  <template id="tpl-expense">
    <h3 class="sheet-title">Inkopen &amp; Uitgaven</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Gebruik het linker formulier om nieuwe uitgaven toe te voegen. Hieronder kun je vaste lasten
        of andere notities bijhouden.
      </p>
      <table class="sheet-table" id="expense-notes">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Leverancier / omschrijving</th>
            <th>Bedrag</th>
            <th>Opmerkingen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td></td>
            <td>Voorbeeld: huur, energie, software, ...</td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="sheet-actions">
        <button type="button" data-action="add-row" data-target="expense-notes">+ Rij toevoegen</button>
      </div>
    </div>
  </template>

  <template id="tpl-categories">
    <h3 class="sheet-title">Categorieën beheren</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Hier kun je zelf categorieën aanmaken die je straks kunt gebruiken in je administratie
        (bijvoorbeeld <em>Omzet</em>, <em>Kantoorkosten</em>, <em>Autokosten</em>, enz.).
      </p>
      <table class="sheet-table" id="category-table">
        <thead>
          <tr>
            <th>Categorie</th>
            <th>Type (inkomst / uitgave)</th>
            <th>Opmerkingen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Omzet</td>
            <td>inkomst</td>
            <td>Algemene omzet</td>
          </tr>
          <tr>
            <td>Kantoorkosten</td>
            <td>uitgave</td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="sheet-actions">
        <button type="button" data-action="add-row" data-target="category-table">+ Categorie toevoegen</button>
      </div>
      <p class="sheet-note">
        Je kunt cellen direct aanpassen. Vergeet niet op <strong>Wijzigingen opslaan</strong> te klikken.
      </p>
    </div>
  </template>

  <template id="tpl-accounts">
    <h3 class="sheet-title">Rekeningen beheren</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Leg hier de rekeningen vast die je gebruikt in je administratie, zoals bankrekeningen,
        kas, privé, enz.
      </p>
      <table class="sheet-table" id="accounts-table">
        <thead>
          <tr>
            <th>Rekening</th>
            <th>IBAN / nummer</th>
            <th>Type (bank, kas, privé)</th>
            <th>Opmerkingen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Zakelijke betaalrekening</td>
            <td></td>
            <td>bank</td>
            <td></td>
          </tr>
          <tr>
            <td>Kas</td>
            <td></td>
            <td>kas</td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="sheet-actions">
        <button type="button" data-action="add-row" data-target="accounts-table">+ Rekening toevoegen</button>
      </div>
    </div>
  </template>

  <template id="tpl-beginbalans">
    <h3 class="sheet-title">Beginbalans</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Vul hier je beginbalans in per 1 januari. Dit is het vermogen en de bezittingen / schulden
        waarmee je het jaar start.
      </p>
      <table class="sheet-table" id="beginbalans-table">
        <thead>
          <tr>
            <th>Post</th>
            <th>Bedrag</th>
            <th>Debet / credit</th>
            <th>Opmerkingen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Zakelijke bankrekening</td>
            <td></td>
            <td>debet</td>
            <td></td>
          </tr>
          <tr>
            <td>Eigen vermogen</td>
            <td></td>
            <td>credit</td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="sheet-actions">
        <button type="button" data-action="add-row" data-target="beginbalans-table">+ Rij toevoegen</button>
      </div>
      <p class="sheet-note">
        De exacte berekeningen van je balans en resultaat worden in een later stap verder
        geautomatiseerd. Voor nu is dit een eenvoudig overzicht.
      </p>
    </div>
  </template>

  <template id="tpl-relations">
    <h3 class="sheet-title">Relaties (klanten &amp; leveranciers)</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Bewaar hier een simpel overzicht van je belangrijkste relaties. Later kun je deze eventueel
        koppelen aan transacties.
      </p>
      <table class="sheet-table" id="relations-table">
        <thead>
          <tr>
            <th>Naam</th>
            <th>Type</th>
            <th>E‑mail / telefoon</th>
            <th>Opmerkingen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Voorbeeld klant</td>
            <td>klant</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>Voorbeeld leverancier</td>
            <td>leverancier</td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="sheet-actions">
        <button type="button" data-action="add-row" data-target="relations-table">+ Relatie toevoegen</button>
      </div>
    </div>
  </template>

  <template id="tpl-wvbalans">
    <h3 class="sheet-title">Winst &amp; Verlies / Balans</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Dit tabblad is een samenvatting van je resultaat (winst / verlies) en de balans aan het einde
        van het jaar. De bedragen voor omzet, uitgaven en resultaat worden automatisch berekend op
        basis van je transacties en het geselecteerde jaar.
      </p>
      <table class="sheet-table" id="wv-table">
        <thead>
          <tr>
            <th>Categorie</th>
            <th>Verlies</th>
            <th>Winst</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rijen worden automatisch gevuld door updateWvTable(). -->
        </tbody>
      </table>
    </div>
  </template>

  <template id="tpl-btw">
    <h3 class="sheet-title">Btw-aangifte</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Dit overzicht toont automatisch je btw-bedragen op basis van alle transacties in het
        geselecteerde jaar en het ingestelde btw-tarief.
      </p>

      <h4>Btw-overzicht</h4>
      <table class="sheet-table">
        <thead>
          <tr>
            <th>Rubriek</th>
            <th>Omschrijving</th>
            <th>Bedrag</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1a</td>
            <td>Leveringen/diensten belast met hoog tarief (omzet excl. btw)</td>
            <td id="btw-omzet-excl"></td>
          </tr>
          <tr>
            <td>5a</td>
            <td>Verschuldigde omzetbelasting (btw over omzet)</td>
            <td id="btw-omzet-vat"></td>
          </tr>
          <tr>
            <td>5b</td>
            <td>Voorbelasting (btw op kosten)</td>
            <td id="btw-costs-vat"></td>
          </tr>
          <tr class="total-row">
            <td></td>
            <td>Te betalen (+) / Terug te vragen (-)</td>
            <td id="btw-net"></td>
          </tr>
        </tbody>
      </table>

      <h4>Volgens de boekhouding</h4>
      <table class="sheet-table">
        <thead>
          <tr>
            <th>Rekening</th>
            <th>Omschrijving</th>
            <th>Saldo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1500</td>
            <td>Btw af te dragen hoog</td>
            <td id="btw-books-payable"></td>
          </tr>
          <tr>
            <td>1520</td>
            <td>Voorbelasting</td>
            <td id="btw-books-input"></td>
          </tr>
          <tr class="total-row">
            <td>1560</td>
            <td>Btw betaald/ontvangen (netto)</td>
            <td id="btw-books-net"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </template>

  <template id="tpl-settings">
    <h3 class="sheet-title">Instellingen</h3>
    <div class="sheet-section">
      <div class="field">
        <label for="settings-year">Boekjaar</label>
        <input id="settings-year" type="number" min="2000" max="2100" />
      </div>
      <div class="field">
        <label for="settings-company">Bedrijfsnaam</label>
        <input id="settings-company" type="text" placeholder="Naam van je bedrijf" />
      </div>
      <div class="field">
        <label for="settings-vatEnabled">Btw-berekening</label>
        <select id="settings-vatEnabled">
          <option value="true">Btw toepassen</option>
          <option value="false">Geen btw toepassen</option>
        </select>
      </div>
      <div class="field">
        <label for="settings-vatRate">Btw-tarief (%)</label>
        <input id="settings-vatRate" type="number" step="0.01" min="0" max="100" value="21" />
      </div>
      <div class="field">
        <label for="settings-themeColor">Accentkleur</label>
        <input id="settings-themeColor" type="color" />
      </div>
      <div class="field">
        <label for="settings-notes">Interne notities</label>
        <textarea id="settings-notes" rows="3" placeholder="Bijv. bijzonderheden voor dit jaar."></textarea>
      </div>

      <div class="field">
        <button type="button" id="toggleLayoutEditBtn">Lay-out bewerken</button>
      </div>
      <div class="field layout-edit-actions hidden">
        <button type="button" id="saveLayoutConfigBtn">Lay-out opslaan</button>
      </div>
      <p id="layoutSaveMessage" class="message"></p>
      <p class="sheet-note">
        Deze instellingen worden samen met de rest van de pagina opgeslagen als je op
        <strong>Wijzigingen opslaan</strong> klikt.
      </p>
    </div>
  </template>

  <template id="tpl-disclaimer">
    <h3 class="sheet-title">Disclaimer</h3>
    <div class="sheet-section">
      <p class="sheet-note">
        Deze webapp is bedoeld als eenvoudig hulpmiddel om je eigen administratie bij te houden,
        gebaseerd op je oorspronkelijke Excel‑bestand.
      </p>
      <ul class="sheet-list">
        <li>Het is <strong>geen officiële boekhoudsoftware</strong>.</li>
        <li>Je blijft zelf verantwoordelijk voor een juiste aangifte en administratie.</li>
        <li>Controleer belangrijke cijfers altijd met je boekhouder of accountant.</li>
      </ul>
      <p class="sheet-note">
        Door deze app te gebruiken ga je ermee akkoord dat er geen garanties worden gegeven over de
        juistheid of volledigheid van de berekeningen.
      </p>
    </div>
  </template>
</div>
  <script src="/app.js"></script>
</body>
</html>
